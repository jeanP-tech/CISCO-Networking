브리지
------

허브는 모든 PC가 하나에 붙어있기 때문에 통신문제가 생길 수 있음.  
-> 연결된 PC 중 두 PC만 통신을 하면 다른 PC의 통신이 불가능. (CSMA/CD 때문)  
why? 콜리전 도메인이 같아서.  
  
이렇게 네트워크 규모가 커질 때 collision domain을 나누려면 무엇을 사용해야 할까?  
**스위치 or 브리지**  
  
브리지는 콜리전 도메인을 어떻게 나누는가?   
-> 허브로 만들어진 콜리전 도메인 사이를 반으로 나누고 중간에 다리를 놓음.  
통신이 다리 한쪽에서만 일어나면 다리를 못 건너가게 하고, 통신이 다리를 통과해야 가능하면 그때 다리를 건너게 해준다.

브리지/스위치의 기능
--------------
  
브리지나 스위치가 하는 다섯 가지 일
- Learning, 배운다
- Flooding, 모르면 들어온 포트를 제외한 다른 모든 포트로 뿌린다
- Forwarding, 해당 포트로 건네준다
- Filtering, 다른 포트로는 못 건너가게 막는다
- Aging, 나이를 먹는다

1. Learning  
배운다, 무엇을? Mac Address를. 출발지의 맥 어드레스.  
ex) A라는 PC가 통신을 위해 프레임을 보낸다. 그때 이 PC의 맥 어드레스를 읽어 자신의 브리지 테이블에 저장해둔다.  
나중에 다른 PC가 A에게 통신할 경우 자신의 브리지 테이블을 참고해서 다리를 건너게 할지 못 건너게 할 지를 결정.  
  
2. Flooding  
들어온 주소가 브리지 테이블에 없다면? 이때 Flooding을 사용. 나머지를 포트에 뿌려줌.  
브로드캐스트나 멀티캐스트의 경우에도 발생.  
  
3. Forwarding  
브리지가 목적지의 맥 어드레스를 자신의 브리지 테이블에 가지고 있고, 이 목적지가 출발지의 목적지와 다른 세그먼트에 존재할 때 일어남.  
Flooding과는 달리 해당 포트 쪽으로만 프레임을 뿌려줌.  
  
4. Filtering  
브리지를 못 넘어가게 막는다.  
어떤 경우에 발생? 브리지가 목적지의 맥 어드레스를 알고 있고, 출발지와 목적지가 같은 세그먼트 상에 있는 경우.  
브리지를 건너가지 않아도 통신이 일어날 수 있기 때문에 다리를 막음.  
이런 기능 때문에 허브와는 다르게 콜리전 도메인을 나눌 수 있는 것.  
  
5. Aging  
브리지 테이블은 우리의 두뇌처럼 어느 정도 시간이 지나고 나면 정보를 브리지 테이블에서 지움.  
다시 새로운 맥 어드레스를 기억해야 하기 때문.  
어떤 맥 어드레스를 브리지 테이블에 저장하면 그때부터 Aging이 가동되어 저장한 후 300초가 지나고, 더 이상 그 주소를 가진 프레임이 들어오지 않으면 브리지 테이블에서 삭제시킴.  

<h3> 브리지와 스위치의 차이점 </h3>

- 이름이 다르다
- 가격이 다르다 - 스위치가 브리지보다는 비쌈
- 인기도가 다르다 - 스위치가 브리지보다 잘 나간다.
- 스위치는 처리 방식이 하드웨어. 스프트웨어적으로 프레임을 처리하는 브리지에 비해 훨씬 빠름.
스위치는 처리 절차를 미리 칩에 구워 하드웨어 방식으로 만드는 ASIC 방식.
- 브리지는 포트들이 같은 속도를 지원하는 반면, 스위치는 서로 다른 속도를 연결해줄 수 있는 기능 제공. 
- 스위치는 브리지에 비해 제공하는 포트 수가 훨씬 많음
- 스위치는 cut-througn 또는 store-and-forward 방식을 사용하는데 비해 브리지는 오로지 store-and-forward 방식을 이용함.  
  
Looping
-----------

루핑: 프레임이 네트워크 상에서 무한정으로 돌기 때문에 이더넷의 특성상 네트워크가 조용해야 데이터를 전송할 수 있는 것들은 계속 네트워크가 조용해지기를 기다려야함.   
이때 데이터 전송이 불가능해지는 상태를 일컫음.  
  
브리지나 스위치에 목적지까지 경로가 두 개 이상 존재하면 반드시 루핑이 발생하고 이를 막는 것이 스패닝 트리 알고리즘.  
  
<h3> 폴트 톨러런트(Fault tolerant)와 로드 밸런싱(Load balancing) </h3>
- 폴트 톨러런드: 장애 대비책으로 대부분 이중 구조를 의미. 전체 네트워크가 하나의 지점에서 발생한 장애로 인해 영향 받는 것을 방지하기 위한 대비책.
- 로드 밸런싱: 로드를 분산하는 것. 이를 테면 하나의 인터넷 회선을 이용하는 것 대신 두 개를 이용하는 것.  
대부분 로드 밸런싱은 폴트 톨러런트가 가능. 역은 안되는 경우가 있음.

Spanning Tree Algorithm
--------------
스패팅 트리는 자동으로 루핑을 검색해서 루핑이 발생할 수 있는 상황을 미리 막아줌.  
How? 스위치 간 두 개의 링크 중 하나를 끊음.  
만약 사용중인 링크가 끊어지면 그때 대기중이던 링크가 살아나서 데이터 전송을 함.  
  
요즘은 다른 링크를 연결하는데 소요되는 시간을 줄이기 위해 다양한 기능을 가진 스위치가 나옴.  
ex) 시스코 이더 채널 - 여러 개의 링크가 하나의 링크처럼 인식 됨

라우팅 or 스위칭?
---------------
- 가격: 라우터가 스위치보다 비쌈
- 속도: 스위치가 더 빠름
- 구성의 편리함: 스위치가 훨씬 구성이 쉬움
  
그렇다면 왜 라우터를 쓸까?
- 브로드캐스트
  - 우리가 사용하는 인터넷 전체가 하나의 브로드캐스트 영역이면 많은 문제가 발생함.
  - 이러한 브로드캐스트 영역을 나눠주기 위해서는 라우터가 필수.
- 패킷 필터링 기능
  - 불필요한 트래픽 전송을 막음
- 로드 분배
  -한쪽 경로에 제가 생겨도 바로 다른 경로를 타고 날아갈 수 있음





