라우터를 한 마디로 말하자면
------------------
라우터란 한마디로 '지능을 가진 경로 배정기'

라우터는 무슨 일을 할까?
------------
라우터는 두 가지 일을 하는데 그 하나가 Path Determination(경로 결정)이고, 또 하나는 Switching(스위칭)이다  
  
데이터 패킷이 목적지까지 갈 수 있는 길을 검사하고 어떤 길로 가는 것이 가장 적절한지를 결정 - 경로 결정  
그 길이 결정되면 그 쪽으로 데이터를 스위칭해줌 - 스위칭  
  
라우터가 가장 좋은 길을 찾는 데에 라우팅 알고리즘, 즉 라우팅 프로토콜이 사용됨  
라우팅 알고리즘은 이를 위해서 라우팅 테이블이란 것을 만들어서 관리

라우터는 어떻게 생겼는가?
----------
라우터를 살 때에는 일체형으로 이미 구성되어 있는 단독형과 껍데기만 산 다음 필요한 모듈을 꽂아 쓸 수 있는 모듈형이 있다.  
네트워크 확장 가능성이 있으면 모듈형이, 가능성이 없으면 단독형이 적합하다.  
  
라우터의 가격은 대부분 성능과 지원되는 인터페이스 숫자, 지원하는 기능에 따라 달라짐.  
즉 가격은 소프트웨어와 하드웨어로 나누어지는데 시스코에서는 라우터에 들어가는 소프트웨어를 IOS라고 부름.

라우팅 프로토콜과 라우티드 프로토콜
-------------------
- 라우티드 프로토콜 : 라우터가 라우팅을 해주는 고객. 라우터라는 자동차를 타고 여행을 떠나는 승객
- 라우팅 프로토콜 : 그 자동차를 안전하고 빠르게 운전하는 운전기사
- 라우팅 테이블 : 운전기사(라우팅 프로토콜)가 어떤 길이 가장 좋은 길인지 메모해 두는 이정표
  - 목적지, 목적지까지 거리, 어떻게 가야하는가 등을 메모
  - 시간이 지나면서 계속 업데이트됨
  
스태틱 라우팅 프로토콜과 다이내믹 라우팅 프로토콜
---------------
- 스태틱 라우팅 프로토콜
  - 장점
    - 한번 정해놓으면 그대로 수행함
    - 사람이 가장 빠르고 좋은 길을 찾아 일일이 경로를 입력해줌
    - 라우터 자체에는 별 부담이 없어 라우터의 속도와 성능이 좋아지고 메모리도 적게 듦
    - 사람이 경로를 알려주기에 라우팅 테이블을 교환할 필요도 없음 -> 네트워크 대역폭 절약
    - 외부에 정보를 알리지 않음 -> 보안에 강함
  - 단점
    - 일일이 목적지 별로 경로를 넣어줘야 해서 귀찮음
    - 입력해준 경로에 문제가 생기면 큰 일이 발생
- 다이내믹 라우팅 프로토콜
  - 장점
    - 자동으로 판단하고 그때그때 좋은 길을 찾을 수 있음
    - 사람이 일일이 경로 입력을 해줄 필요가 없음
  - 단점
    - 라우터에가 할 일이 많아져 부담을 줌
    
라우팅 테이블에 대한 이야기
-----------------
라우팅 테이블이란 라우터가 어떤 경로를 찾을 때 사용하는 것.  
이것은 사용하는 라우터의 프로토콜에 따라 달라지며, 라우터는 항상 최적의 경로를 찾아 이것을 라우팅 테이블에 유지하고 있음.  
이 지도 정보는 RAM에 올라가기 때문에 파워가 꺼지면 전부 지워짐. 그리고 다시 파워를 켜면 수초 또는 수분만에 만들어짐.  
이 라우팅 테이블을 시스코 라우터에서 보는 명령은 show ip route이다.

AS 그리고 내부용과 외부용 라우팅 프로토콜
-----------------
AS(Autonomous System) : 하나의 네트워크 관리자에 의해 관리되는 라우터들의 집단  
  
라우터를 AS로 묶어주는 이유는 라우터가 가지는 정보를 효율적으로 관리하고 인터넷 서비스를 간편하게 하기 위해.
AS 안에 있는 라우터들은 자신의 AS에 속해있는 라우터에 대한 정보만 알고 있으면 됨.  
그러다가 AS 밖으로 나갈 때는 문지기 라우터(ASBR - Autonomous System Boundary Router)에게 정보를 물어봐서 나감.  
  
문지기 라우터는 자신의 AS와 인접한 다른 AS에 대한 정보를 가지고 있음.  
그러면서 자기 AS에서 밖으로 나가는 라우터나 외부 AS에서 들어오는 라우터에게 정보 제공.  
-> 라우터는 전 세계 모든 네트워크에 대한 정보가 아닌, 자신이 속한 AS에 대한 정보만 가지면 됨.  
이때 라우터가 AS 내부에서 사용하는 라우팅 프로토콜을 Interior Routing Protocol 또는 Interior Gateway Protocol(IGP)라고 함.
AS외부에서 사용하는 프로토콜은 Exterior Gateway Protocol 또는 Exterior Gateway Protocol(EGP)  
  
IGP의 예 : RIP, IGRP, EIGRP, OSPF  
EGP의 예 : EGP, BGP

라우터 구성의 시작
--------------
라우터에 명령어를 입력하는 방법 다섯 가지
1. 콘솔 케이블 이용
  - 콘솔 케이블을 라우터의 콘솔 포트에 연결하고 나머지 한쪽은 컴퓨터의 serial port에 연결
  - 가장 일반적인 구성, but 직접 PC를 들고가서 콘솔 케이블을 연결해주어야 하는 불편함
  - 가장 강력한 세팅 방법 - 라우터와 통신이 끊어져도 라우터에 접근 가능
2. 원격지에서 모뎀을 이 연결
  - 텔넷으로는 라우터에 접근이 불가능하고 콘솔을 연결해서 구성을 하자니 너무 먼 곳에서 사용하는 방법
3. 텔넷(Telnet)을 이용한 구성
  - 라우터를 관리할 때 가장 많이 사용
  - 장점
    - 라우터의 IP 주소만 알고 있고 네트워크에 접속만 되어 있다면 어디서든 구성 가능
  - 단점
    - 라우터의 맨 처음 구성시에는 IP 주소가 없어서 텔넷 사용 불가능
    - 네트워크 연결이 끊어질 경우 텔넷 접속 불가능
4. 네트워크 관리 시스템(NMS)에 의한 라우터의 구성
  - 라우터 구성 방법 중 가장 쉬운 방법
5. TETP 서버로 라우터 구성
  - 서버에서 직접 라우터로 세팅을 해주는 방식이 아님
  - 이미 다른 곳에서 만들어 놓은 라우터의 구성 파일을 TETP 서버에 저장해 두었다가 라우터로 다운로드하는 방식
    - 이때 다운로드에 사용되는 프로토콜이 바로 TETP(Trivial File Transfer Protocol)
 
라우터의 중요한 몇 가지 모드
-----------------
시스코 라우터를 들어가면 몇 가지 모드 화면으로 들어가게 된다
- RXBOOT 모드
  - 라우터의 패스워드를 모르거나 라우터의 이미지 파일(IOS)에 문제가 생긴 경우 복구를 위해 사용
  - ROMMON 모드라고도 함 (ROM Monitor 모드)
- 셋업 모드
  - 라우터를 처음 구매해서 파워를 켰거나 라우터에 구성 파일이 없는 경우 라우터가 부팅하면서 자동으로 들어가는 모드
- 유저 모드
  - 이 모드에서는 테스트, 즉 현재 상태를 볼 수 있음
  - 핑, 트레이스 등을 해볼 수 있지만 구성 파일을 본다든가 구성 자체를 변경할 수는 없음
- 프리빌리지드(Privileged) 모드
  - 운영자 모드
  - 모든 라우터의 명령이 가능
  - 유저 모드에서 프리빌리지드로 들어가는 명령은 enable, 나가는 명령은 disable
- 구성 모드
  - Config 모드라고도 함
  - 프리빌리지드 모드에 있어야 들어갈 수 있음
  
라우터 안에는 어떤 것들이 살까?
---------------
- 램(RAM)
  - 라우터를 운용하는 운용 시스템이 올라감
  - 운영 체제 다음으로 라우팅 테이블이 들어감
  - 구성파일 : 구성 모드에서 만들어지는 파일이 들어감
- NVRAM(Non volatile RAM)
  - 구성파일을 백업함 
    - 라우터가 켜지면 램으로 올라와서 라우터를 구성파일대로 움직이게 하고 파워가 꺼질 때는 NVRAM에 저장됨
- Flash 메모리
  - 운영체제 IOS는 플래시 메모리에 저장됨
  - 전원이 꺼져도 데이터가 지워지지 않는 곳
  - 라우터에 따라서는 플래시 메모리 교체, 확장 가능
  - NVRAM에 비해 용량이 크고 주로 IOS 이미지 파일 저장용으로 사용됨
  - 플래시 메모리에 저장되어 있던 IOS는 전원이 켜지면서 램으로 뛰어올라 오고, 전원이 꺼지면 램에서 내려와 플래시 메모리에 머무름
- ROM
  - 라우터의 가장 기본적인 내용들을 적어 놓음
  - 기본적인 IOS가 들어 있음 -> 라우터에 문제가 생길 경우 기본적인 IOS를 롬에서 가져오기 위해서
 
내가 가진 라우터의 현재 정보는 모두 이 곳에
----------------
1. Show version
  - 라우터의 기본적인 내용, 즉 사용하는 소프트웨어 버전이나 가지고 있는 인터페이스의 종류, IOS가 어디에서 부팅했는지 등에 관한 전반적인 내용을 볼 수 있는 명령
2. Show interface
  - 인터페이스의 현재 상황까지도 상세하게 알 수 있는 명령
  - 여기에서 인터페이스란 라우터 외부에 네트워크와 붙이려고 만들어 놓은 장치
3. Show flash
  - 플래시 메모리를 보는 명령
  - 플래시 메모리에는 IOS의 이미지 정보가 들어있음
4. Show processes cpu
  - 현재 라우터의 동작 상태를 보여줌
  - 라우터의 5분, 1분, 5초 동안의 CPU 로드가 퍼센트로 나타나기 때문에 라우터가 얼마나 일을 하고 있는지 알 수 있는 명령
  
라우터 셋업 모드
------------
라우터의 초보자를 위한 모드로 질문과 대답으로 구성파일을 만드는 셋업 모드가 있다.  
라우터를 처음 사서 부팅하면 자동으로 셋업 모드로 들어가고, 나중에는 setup이라는 명령으로 들어갈 수 있음.  
셋업 모드를 모두 마치면 라우터는 그 동안의 구성 파일을 보여주고 이 구성 파일을 사용할 것인지를 물어봄.  
사용자가 구성파일을 사용하겠다고 하면 이 파일은 NVRAM에 저장된다. 하지만 이런 셋업 모드는 자주 쓰는 모드는 아니다.  

라우터에 명령을 입력하는 두 번째 방법
-------------------
셋업 방식은 시간이 많이 걸리고 명령이 없는 경우가 많아, 대부분 Configuration 모드, 즉 구성 모드에서 작업함.  
구성 모드로 들어가기 위해서는 configure이라는 명령 사용.  
구성 모드로 들어갈 수 있는 것은 프리빌리지드 모드(관리자 모드) 뿐.  

스태틱(Static) 라우팅을 이용한 라우터 구성
--------------
스태틱 라우팅 프로토콜은 갈 수 있는 경로가 하나밖에 없는 stub 라우터용으로 많이 사용됨  
stub 네트워크: 오직 하나의 경로만을 통해서 외부망과 연결된 네트워크   
ex) 게임방 네트워크  

스태틱 라우팅만 알면 디폴트 라우트는 식은 죽 먹기
----------
디폴트 라우트: 경로를 찾아내지 못한 모든 네트워크들은 모두 이곳으로 가라고 미리 정해놓은 길  
  
디폴트 라우트는 어디에서 사용될까? 인터넷을 사용하는 라우터, Stub 네트워크에 있는 라우터  
스태틱 라우팅은 특정 목적지를 가기 위한 구성이었지만, 디폴트 라우팅은 모든 목적지가 디폴트로 정한 곳으로 간다.  
  
디폴트 라우트를 만드는 방법 두 가지
1. 디폴트 네트워크를 이용한 구성
  - 규칙
    1. Ip default-network 뒤에 오는 네트워크 주소는 항상 클래스를 맞춰 주어야 한다
    2. RIP에서 디폴트 네트워크를 구성하는 경우 Ip default-network 뒤에 오는 네트워크 주소는 반드시 RIP 프로토콜에서 정의된 네트워크여야 함
2. 스태틱 명령을 이용한 구성

라우터의 구성 명령에 대한 버전별 정리
-----------
구성 파일을 보는 명령: show running-config

디스턴스 벡터와 링크 스테이트
-----------
라우팅 테이블을 어떤 방식으로 관리하는가에 따른 분류
- 디스턴스 벡터 알고리즘
  - 디스턴스(Distance)와 벡터(Vector)만을 위주로 만들어진 라우팅 알고리즘
  - 라우터는 목적지까지의 거리와 그 목적지까지 가려면 어떤 인접 라우터를 거쳐서 가야 하는 방향만을 저장
  - 인접 라우터들과 주기적으로 라우팅 테이블을 교환해 자신의 정보에 변화가 생기지 않았는지를 확인하고 관리
  - 장점
    - 한 라우터가 모든 라우팅 정보를 가지고 있을 필요가 없기 때문에 라우팅 테이블을 줄임 -> 메모리 절약
    - 라우팅의 구성이 간단해 여러 곳에서 표준으로 사용
  - 단점
    - 트래픽을 쓸데없이 낭비
    - 라우팅 테이블에 변화가 생길 경우 이 변화를 모든 라우터가 알 때 까지 걸리는 시간(Convergence time)이 너무 느림
  - ex) RIP(Routing Information Protocol), IGRP(Interior Gateway Routing Protocol)
- 링크 스테이트 알고리즘
  1. 링크에 대한 정보를 토폴러지 데이터베이스로 만듦
  2. 만들어진 토폴러스 데이터베이스를 가지고 라우터는 SPF 알고리즘을 계산
  3. 이 계산 결과로 SPF 트리를 만듦
  4. 트리 정보를 이용해 라우팅 테이블을 만듦
  - 장점
    - 한 라우터에서 목적지까지 모든 경로를 알고 있음 -> 중간에 링크의 변화가 생겨도 이를 알아내는 시간이 짧음
    - 라우팅 테이블의 교환이 자주 발생하지 않고, 교환이 일어나도 테이블에 변화가 있는 것만 교환 -> 트래픽 발생을 줄여줌
  - 단점
    - 라우터가 모든 라우팅 정보를 관리해야 함 -> 메모리를 많이 소모
    - SPF 계산 등 여러 가지 계산을 해야 함 -> CPU가 일을 많이 함
  - ex) 
